<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <meta property="og:url" content="https://peyoot.github.io/server-maintainer/get-started.html"><meta property="og:title" content="Get Started"><meta property="og:description" content="Get Started Server-Maintainer use portainer to manage containers which host websites & apps. This tool is designed for those small enterprises and engineers themselves who need ..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Get Started","image":[""],"dateModified":null,"author":[]}</script><title>Get Started</title><meta name="description" content="Get Started Server-Maintainer use portainer to manage containers which host websites & apps. This tool is designed for those small enterprises and engineers themselves who need ...">
    <link rel="preload" href="/assets/style-DQ_wQnlu.css" as="style"><link rel="stylesheet" href="/assets/style-DQ_wQnlu.css">
    <link rel="modulepreload" href="/assets/app-oTA4_50g.js"><link rel="modulepreload" href="/assets/get-started.html-ClYKz6yJ.js">
    <link rel="prefetch" href="/assets/index.html-DN9aMdLe.js" as="script"><link rel="prefetch" href="/assets/about-me.html-BU1iXOUv.js" as="script"><link rel="prefetch" href="/assets/my-stuff.html-B_RzyFbb.js" as="script"><link rel="prefetch" href="/assets/index.html-CB83IgRS.js" as="script"><link rel="prefetch" href="/assets/app.html-CQlD6MWj.js" as="script"><link rel="prefetch" href="/assets/ccmp25plc.html-Bm6_pFPZ.js" as="script"><link rel="prefetch" href="/assets/get-started.html-jlUZXalx.js" as="script"><link rel="prefetch" href="/assets/introduction.html-BhxqRXX1.js" as="script"><link rel="prefetch" href="/assets/meta-custom.html-BEf3T-ji.js" as="script"><link rel="prefetch" href="/assets/mono.html-BOlPkdrX.js" as="script"><link rel="prefetch" href="/assets/ros2.html-BSNVbn2N.js" as="script"><link rel="prefetch" href="/assets/wireless-camera.html-Dx1m9oVv.js" as="script"><link rel="prefetch" href="/assets/index.html-Ct_CtMUk.js" as="script"><link rel="prefetch" href="/assets/get-started.html-B3dJJnTX.js" as="script"><link rel="prefetch" href="/assets/introduction.html-CMX_tum1.js" as="script"><link rel="prefetch" href="/assets/index.html-J26pmibH.js" as="script"><link rel="prefetch" href="/assets/introduction.html-BfBRC0lL.js" as="script"><link rel="prefetch" href="/assets/index.html-CMIpy7KA.js" as="script"><link rel="prefetch" href="/assets/about-me.html-DQxJCm6F.js" as="script"><link rel="prefetch" href="/assets/my-stuff.html-C0zuLDaR.js" as="script"><link rel="prefetch" href="/assets/about-gridzest.html-Cza-fjIv.js" as="script"><link rel="prefetch" href="/assets/index.html-5ZYqVjC4.js" as="script"><link rel="prefetch" href="/assets/ccmp25plc.html-DKsAwZtZ.js" as="script"><link rel="prefetch" href="/assets/custom-dt.html-DBPX3HD3.js" as="script"><link rel="prefetch" href="/assets/devtool.html-DR_94wzz.js" as="script"><link rel="prefetch" href="/assets/dey-buildroot.html-CNcemYuQ.js" as="script"><link rel="prefetch" href="/assets/dey-installer.html-CGSWPdlY.js" as="script"><link rel="prefetch" href="/assets/dt-advance.html-xadDVLZX.js" as="script"><link rel="prefetch" href="/assets/get-started.html-B2IFRcRS.js" as="script"><link rel="prefetch" href="/assets/howto.html-6x426e0V.js" as="script"><link rel="prefetch" href="/assets/introduction.html-Diggq2_P.js" as="script"><link rel="prefetch" href="/assets/meta-custom.html-m8hHNV63.js" as="script"><link rel="prefetch" href="/assets/mono.html-BsVHRKCg.js" as="script"><link rel="prefetch" href="/assets/ros2.html-XDnX7Tal.js" as="script"><link rel="prefetch" href="/assets/rtnodemo.html-DBuLXUv4.js" as="script"><link rel="prefetch" href="/assets/wireless-camera.html-ChaOj9Ji.js" as="script"><link rel="prefetch" href="/assets/aitool.html-LgxNPrDA.js" as="script"><link rel="prefetch" href="/assets/financial_plan.html-BnXz-HVB.js" as="script"><link rel="prefetch" href="/assets/mypass.html-CNFNVcOu.js" as="script"><link rel="prefetch" href="/assets/ccmp25-timer.html-BO4aqEdq.js" as="script"><link rel="prefetch" href="/assets/microbus.html-Cvg5DktA.js" as="script"><link rel="prefetch" href="/assets/qt-realtime.html-DJkqjDPE.js" as="script"><link rel="prefetch" href="/assets/gs.html-CLfZMPkQ.js" as="script"><link rel="prefetch" href="/assets/devshell.html-CppaTyl4.js" as="script"><link rel="prefetch" href="/assets/dynamic-debug.html-D6Rsg6Bw.js" as="script"><link rel="prefetch" href="/assets/repo.html-BSu7Iz-7.js" as="script"><link rel="prefetch" href="/assets/it.html-CXN5Avtm.js" as="script"><link rel="prefetch" href="/assets/cc93-get-started.html-BxhjLnim.js" as="script"><link rel="prefetch" href="/assets/ccmp2-sbc.html-Do_YMbfj.js" as="script"><link rel="prefetch" href="/assets/ccmp25-timer.html-43ngOTk2.js" as="script"><link rel="prefetch" href="/assets/dvk_test_recovery.html-DuGPtbYk.js" as="script"><link rel="prefetch" href="/assets/get-started.html-CW8MyaqT.js" as="script"><link rel="prefetch" href="/assets/i2c.html-DcXr8gIN.js" as="script"><link rel="prefetch" href="/assets/mmc.html-CEGW8L8M.js" as="script"><link rel="prefetch" href="/assets/qt-realtime.html-DkkbHHjv.js" as="script"><link rel="prefetch" href="/assets/spi.html-UfgQmU6c.js" as="script"><link rel="prefetch" href="/assets/usb.html-B44X0lAF.js" as="script"><link rel="prefetch" href="/assets/wifi-vs-nonwifi.html-Jh5dYFmi.js" as="script"><link rel="prefetch" href="/assets/ccmp25-rtsp.html-p0Rquh4j.js" as="script"><link rel="prefetch" href="/assets/wl-usage.html-CF0ynMVr.js" as="script"><link rel="prefetch" href="/assets/xbee3.html-BVPCBNIt.js" as="script"><link rel="prefetch" href="/assets/console-interference.html-CAq5Iw1a.js" as="script"><link rel="prefetch" href="/assets/dey-driver.html-eM-0mC8p.js" as="script"><link rel="prefetch" href="/assets/digi-dey.html-BGi3kbdj.js" as="script"><link rel="prefetch" href="/assets/lvds-debugging.html-CbZ35DmD.js" as="script"><link rel="prefetch" href="/assets/lvds-panel-driver.html-DJvWs-t3.js" as="script"><link rel="prefetch" href="/assets/ov2740-debugging.html-DOglwVH5.js" as="script"><link rel="prefetch" href="/assets/regulator.html-BHZqHnh-.js" as="script"><link rel="prefetch" href="/assets/tsc-driver.html-TIDY7aZf.js" as="script"><link rel="prefetch" href="/assets/stash.html-Ck5t5121.js" as="script"><link rel="prefetch" href="/assets/gitea_keycloak.html-BjM8_2oB.js" as="script"><link rel="prefetch" href="/assets/web-dev.html-BTD5jeph.js" as="script"><link rel="prefetch" href="/assets/bash-skill.html-Bep7rmMq.js" as="script"><link rel="prefetch" href="/assets/ipv6.html-9KIOYtk0.js" as="script"><link rel="prefetch" href="/assets/linux-skill.html-ukPfuJ3I.js" as="script"><link rel="prefetch" href="/assets/index.html-CIuvtIJ_.js" as="script"><link rel="prefetch" href="/assets/get-started.html-B9BJEXvh.js" as="script"><link rel="prefetch" href="/assets/introduction.html-DaUWvwja.js" as="script"><link rel="prefetch" href="/assets/index.html-BP0iqaR-.js" as="script"><link rel="prefetch" href="/assets/domaincerts.html-cYHCiREK.js" as="script"><link rel="prefetch" href="/assets/faq.html-CKmSvQew.js" as="script"><link rel="prefetch" href="/assets/get-started.html-D6DP9NEZ.js" as="script"><link rel="prefetch" href="/assets/introduction.html-BpRKH71B.js" as="script"><link rel="prefetch" href="/assets/portainer.html-BSRt_rS_.js" as="script"><link rel="prefetch" href="/assets/pve.html-ChETWMB_.js" as="script"><link rel="prefetch" href="/assets/et2046.html-CwD2xFJG.js" as="script"><link rel="prefetch" href="/assets/viena-firmware.html-D3dTKOgV.js" as="script"><link rel="prefetch" href="/assets/viena-log.html-BENaCizX.js" as="script"><link rel="prefetch" href="/assets/404.html-DrUQRBzL.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><!----></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/" aria-label="Home"><!--[--><!--[--><!--]--> Home <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="pvpn"><span class="title">pvpn</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="pvpn"><span class="title">pvpn</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/pvpn/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--> Introduction <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/pvpn/get-started.html" aria-label="Get Started"><!--[--><!--[--><!--]--> Get Started <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="deyaio"><span class="title">deyaio</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="deyaio"><span class="title">deyaio</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--> Introduction <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/get-started.html" aria-label="Get Started"><!--[--><!--[--><!--]--> Get Started <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/meta-custom.html" aria-label="meta-custom"><!--[--><!--[--><!--]--> meta-custom <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/ros2.html" aria-label="ROS2 Support"><!--[--><!--[--><!--]--> ROS2 Support <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/mono.html" aria-label="Mono Support"><!--[--><!--[--><!--]--> Mono Support <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/wireless-camera.html" aria-label="Wireless Camera Solution"><!--[--><!--[--><!--]--> Wireless Camera Solution <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link route-link-active" href="/" aria-label="English"><!--[--><!--[--><!--]--> English <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/zh/" aria-label="简体中文"><!--[--><!--[--><!--]--> 简体中文 <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="http://github.com/peyoot" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link" href="/" aria-label="Home"><!--[--><!--[--><!--]--> Home <!--[--><!--]--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="pvpn"><span class="title">pvpn</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="pvpn"><span class="title">pvpn</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/pvpn/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--> Introduction <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/pvpn/get-started.html" aria-label="Get Started"><!--[--><!--[--><!--]--> Get Started <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="deyaio"><span class="title">deyaio</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="deyaio"><span class="title">deyaio</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--> Introduction <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/get-started.html" aria-label="Get Started"><!--[--><!--[--><!--]--> Get Started <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/meta-custom.html" aria-label="meta-custom"><!--[--><!--[--><!--]--> meta-custom <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/ros2.html" aria-label="ROS2 Support"><!--[--><!--[--><!--]--> ROS2 Support <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/mono.html" aria-label="Mono Support"><!--[--><!--[--><!--]--> Mono Support <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/deyaio/wireless-camera.html" aria-label="Wireless Camera Solution"><!--[--><!--[--><!--]--> Wireless Camera Solution <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link route-link-active" href="/" aria-label="English"><!--[--><!--[--><!--]--> English <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/zh/" aria-label="简体中文"><!--[--><!--[--><!--]--> 简体中文 <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="http://github.com/peyoot" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="get-started" tabindex="-1"><a class="header-anchor" href="#get-started"><span>Get Started</span></a></h1><p>Server-Maintainer use portainer to manage containers which host websites &amp; apps. This tool is designed for those small enterprises and engineers themselves who need host websites and apps in server but without the budget to built kubernetes based private cloud. You can run the tool in a nuc or low cost server and use the same budget server as backup &amp; sync server.</p><h2 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites"><span>Prerequisites</span></a></h2><p>As server-maintainer use portainer &amp; docker to manager apps. If your websites or apps are installed in a standalone way, convert to containerized form first. Server-maintainer use portainer and it&#39;s api to manager backup process. Install docker, docker compose first and use docker-compose to run a portainer.</p><h3 id="install-portainer" tabindex="-1"><a class="header-anchor" href="#install-portainer"><span>Install portainer</span></a></h3><p>First, create a docker container network, name it to pvpn or either name you like:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>docker network create pvpn --subnet 172.100.100.0/24
mkdir -p ~/docker/portainer
nano docker-compose.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here&#39;s the portainer compose file:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>version: &#39;3&#39;
services:  portainer:
    image: portainer/portainer-ce:2.19.4
    container_name: portainer
    restart: unless-stopped
    security_opt:
      - no-new-privileges:true
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - data:/data
    ports:
      - 9000:9000
volumes:
  data:
networks:
  default:
    external:
      name: pvpn

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>now start to use portainer to manage apps:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>docker compose up -d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="install-dnmp-as-portainer-stack" tabindex="-1"><a class="header-anchor" href="#install-dnmp-as-portainer-stack"><span>Install dnmp as portainer stack</span></a></h3><p>Open portainer web portal and enter local environment. We need to create dnmp volumes fist and then add dnmp stack.</p><ol><li>create these volume: dnmp_www, dnmp_services， dnmp_data, dnmp_logs</li><li>clone peyoot/dnmp and switch to portainer branch</li><li>copy dnmp configs:</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sudo cp -r www/. /var/lib/docker/volumes/dnmp_www/_data/
sudo cp -r services/. /var/lib/docker/volumes/dnmp_services/_data/
sudo cp -r data/. /var/lib/docker/volumes/dnmp_data/_data/
sudo cp -r logs/. /var/lib/docker/volumes/dnmp_logs/_data/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4.add a dnmp stack in portainer:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>version: &quot;3&quot;
services:
  nginx:
    image: peyoot/nginx:1.25.1-alpine
    container_name: nginx
    ports:
      - &quot;80:80&quot;
      - &quot;443:443&quot;
    volumes:
      - /var/lib/docker/volumes/dnmp_www/_data:/www/:rw
      - /var/lib/docker/volumes/dnmp_services/_data/nginx/ssl:/ssl:rw
      - /var/lib/docker/volumes/dnmp_services/_data/nginx/conf.d:/etc/nginx/conf.d:rw
      - /var/lib/docker/volumes/dnmp_services/_data/nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - /var/lib/docker/volumes/dnmp_services/_data/nginx/fastcgi-php.conf:/etc/nginx/fastcgi-php.conf:ro
      - /var/lib/docker/volumes/dnmp_services/_data/nginx/fastcgi_params:/etc/nginx/fastcgi_params:ro
      - /var/lib/docker/volumes/dnmp_logs/_data/nginx:/var/log/nginx/:rw
    environment:
      - TZ=Asia/Shanghai
    restart: always

  php:
    image: peyoot/php:7.4.33-fpm-alpine
    container_name: php
    expose:
      - 9501
    volumes:
      - /var/lib/docker/volumes/dnmp_www/_data:/www/:rw
      - /var/lib/docker/volumes/dnmp_services/_data/php/php.ini:/usr/local/etc/php/php.ini:ro
      - /var/lib/docker/volumes/dnmp_services/_data/php/php-fpm.conf:/usr/local/etc/php-fpm.d/www.conf:rw
      - /var/lib/docker/volumes/dnmp_logs/_data/php:/var/log/php
      - /var/lib/docker/volumes/dnmp_data/_data/composer:/tmp/composer
    restart: always
    cap_add:
      - SYS_PTRACE

  php81:
    image: peyoot/php:8.1.22-fpm-alpine
    container_name: php81
    expose:
      - 9501
    volumes:
      - /var/lib/docker/volumes/dnmp_www/_data:/www/:rw
      - /var/lib/docker/volumes/dnmp_services/_data/php81/php.ini:/usr/local/etc/php/php.ini:ro
      - /var/lib/docker/volumes/dnmp_services/_data/php81/php-fpm.conf:/usr/local/etc/php-fpm.d/www.conf:rw
      - /var/lib/docker/volumes/dnmp_logs/_data/php81:/var/log/php
      - /var/lib/docker/volumes/dnmp_data/_data/composer:/tmp/composer
    restart: always
    cap_add:
      - SYS_PTRACE

  mysql:
    image: mysql:8.0.34
    container_name: mysql
    ports:
      - &quot;3306:3306&quot;
    volumes:
      - /var/lib/docker/volumes/dnmp_services/_data/mysql/mysql.cnf:/etc/mysql/conf.d/mysql.cnf:ro
      - /var/lib/docker/volumes/dnmp_data/_data/mysql:/var/lib/mysql/:rw
      - /var/lib/docker/volumes/dnmp_logs/_data/mysql:/var/log/mysql/:rw

    restart: always
    environment:
      - MYSQL_ROOT_PASSWORD=Mpswroot
      - MYSQL_ROOT_HOST=%
      - TZ=Asia/Shanghai

  redis:
    image: redis:6.2.13-alpine
    container_name: redis
    ports:
      - &quot;16379:6379&quot;
    volumes:
      - /var/lib/docker/volumes/dnmp_services/_data/redis/redis-6.conf:/etc/redis.conf:ro
      - /var/lib/docker/volumes/dnmp_data/_data/redis:/data/:rw
    restart: always
    entrypoint: [&quot;redis-server&quot;, &quot;/etc/redis.conf&quot;]
    environment:
      - TZ=Asia/Shanghai

  #rabbitmq:
  #  image: peyoot/rabbitmq:3.12.2-management
  #  container_name: rabbitmq
  #  restart: always
  #  ports:
  #    - &quot;5672:5672&quot;
  #    - &quot;15672:15672&quot;
  #  volumes:
  #    - /var/lib/docker/volumes/dnmp_data/_data/rabbitmq:/var/lib/rabbitmq
  #  environment:
  #    - TZ=Asia/Shanghai
  #    - RABBITMQ_DEFAULT_USER=peyoot
  #    - RABBITMQ_DEFAULT_PASS=Mpswpeyoot

  phpmyadmin:
    image: phpmyadmin/phpmyadmin:5.2.1
    container_name: phpmyadmin
    ports:
      - &quot;8080:80&quot;
    volumes:
      - /var/lib/docker/volumes/dnmp_services/_data/phpmyadmin/config.user.inc.php:/etc/phpmyadmin/config.user.inc.php:ro
      - /var/lib/docker/volumes/dnmp_services/_data/phpmyadmin/php-phpmyadmin.ini:/usr/local/etc/php/conf.d/php-phpmyadmin.ini:ro
    environment:
      - PMA_HOST=mysql
      - PMA_PORT=3306
      - TZ=Asia/Shanghai

#  elasticsearch:
#    image: peyoot/elasticsearch:7.17.7
#    container_name: elasticsearch
#    environment:
#      - TZ=Asia/Shanghai
#      - discovery.type=single-node
#      - &quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;
#    volumes:
#      - /var/lib/docker/volumes/dnmp_data/_data/esdata:/usr/share/elasticsearch/data
#      - /var/lib/docker/volumes/dnmp_services/_data/elasticsearch/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml
#    hostname: elasticsearch
#    restart: always
#    ports:
#      - &quot;9200:9200&quot;
#      - &quot;9300:9300&quot;

volumes:
  dnmp_www:
    external: true
  dnmp_services:
    external: true
  dnmp_logs:
    external: true
  dnmp_data:
    external: true

networks:
  default:
    external:
      name: pvpn

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="external-link label" href="http://github.com/peyoot/edit/main/docs/server-maintainer/get-started.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--[--><svg class="icon" viewBox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-oTA4_50g.js" defer></script>
  </body>
</html>
