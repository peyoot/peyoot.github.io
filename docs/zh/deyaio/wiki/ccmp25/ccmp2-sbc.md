# ccmp2-sbc开源工控单板机项目
本项目旨在打造一个全能的工控主板，充分考虑各种接口的需求，尽可能最大化利用ConnectCore MP2系列片上系统核心模块的所有资源，实现一次画板，各平台通用的目标。同时兼顾成本和通用性，选择主流的外围器件，满足工业级要求的同时，最大化降低成本和实现难度。

# 电源

本方案计划实现5V和锂电和USB口兼容供电，当有外部USB口插入时，优先选择U口供电。如需24V转5V，可自行加贴。

为了保障低功耗要求，除模块自带的3.3V输出外，板级5V和3.3V由同一个负载开关PWR_BOARD_EN控制。

## 电源芯片选型

设计上先画好多种选择，最终根据实际使用场景挑选是否是电池供电。

### 5V或锂电转3.3V

PW2052 是一种高效率、高频同步 DC-DC 降压调节器。 100%的人占空比特性提供低压差操作，延长便携式系统的电池寿命。内部同步开关提高了效率，消除了对外部肖特基的需要二极管。在关机模式下，输入电源电流小于 1µA。限流保护和片上热关机功能可防止过载或环境温度。

TPS54202DDCR 的超小封装和低静态电流非常合适。但需要注意，其小封装对PCB散热设计有较高要求。TPS54302有PG引脚。总的来说，这款成本很低，可作为主要选择，但要注意它的输入电压范围不足以支持锂电供电的3V3转换。

PW2501和WX3109可以覆盖锂电供电时的3.3V输出。

使用CCMP2，一般很少涉及3.3V的board供电，内置的PMIC就够了，除非3.3V外接屏或其它场景。 

优先选择PW2501来实现。

### 5V或锂电转5V
本质上，这是负载开关或升压，有几种实现方式。如果是锂电也可以同时兼顾充电的需求。

如果是单节锂电还要兼顾充电需求，同时又提供稳定的5V，可以用MP2636GR。需电量检测芯片则可以用BQ27427。如果是简单的低于某阀值电量的检测可用CN302这款可调整迟滞的低功耗电池电压检测芯片。 MP2636GR这颗芯片成本在5~10元。

如果只用5V负载开关，可以用TPS22915，TPS22965,SY6280CAC，SGM2521,其中TPS22965 和 SGM2521还有eFuse的功能。

### 5V和电池供电自动切换
这种电路要能自动切换，优先使用5V，电池供电时有较低静态电流。
GLF4020和TPS2121是芯片方案，也可以用PMOS分立切换方案：

![双电源切换](/pic/dual-pwr.jpg)

AO3401 + 肖特基二极管（D1）SS14或SDM20U45 + 1MΩ 组合可覆盖90%场景，兼顾成本、供货和性能。


### 隔离和保护

eFuse芯片，24V可用TPS26630，TPS2662x，5V有SGM2521, TPS2595x 。

如果用PPTC+TVS，则可选保持电流（Ihold） > 800mA，且 触发电流（Itrip） 在 1.2A 左右 的PPTC，首选Bourns MF-NSMF110，保持电流: 1.10 A (1100mA) - 完美满足 >800mA 的要求，并有37.5%的余量，非常安全。
虽然它的标称触发电流是2.2A，但这是在一定条件下（如23°C环境，完全冷却状态）的数值。在实际板卡上，当电流达到1.2A~1.5A并持续一段时间后，由于PPTC自身发热，它完全有可能进入高阻状态并动作。选择Ihold为1.10A确保了它绝不会在800mA的正常工作时误触发，同时提供了可靠的过载保护。这是最稳健的选择。
备选：Bourns MF-MSMF100，Littelfuse 1812L110/24MR
TVS:SMBJ5.0A

B0505S-1WR3 - 隔离DC-DC转换器，实现隔离电源，生成5V_ISO



## USB接口的电源


