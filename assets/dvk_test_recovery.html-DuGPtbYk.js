import{_ as e,o as t,c as i,b as o}from"./app-oTA4_50g.js";const l={},c=o(`<h2 id="如何恢复ccmp25开发板的u-boot" tabindex="-1"><a class="header-anchor" href="#如何恢复ccmp25开发板的u-boot"><span>如何恢复CCMP25开发板的U-Boot</span></a></h2><p>有时，我们误在CCMP25上误刷了用户板卡的Uboot，当用户板卡的U-Boot有和开发板不一样的电源或硬件定义时，原有的CCMP25开发板功能可能就不能用了，这时我们需要恢得开发板默认的UBoot。</p><p>如果我们用于更新固件的接口代码或引脚定义同开发板一样，我们仍可以用相关的接口进行升级固件。当所有可用的升级固件接口都有变更时，则需要用USB调试模式来恢复。</p><ol><li>为USB调试模式准备固件 以DEY 5.0r3为例，到官方FTP下载下面这些固件：https://ftp1.digi.com/support/digiembeddedyocto/5.0/r3/images/ccmp25-dvk/wayland/</li></ol><ul><li>USB启动所需的TF-A固件：tf-a-ccmp25-dvk-usb.stm32</li><li>可以跑在DDR的FIP固件：fip-ccmp25-dvk-ddr-optee-emmc.bin</li><li>重新刷入所需的FIP二进制固件：fip-ccmp25-dvk-optee-emmc.bin</li></ul><ol start="2"><li>安装所需工具软件 在主机电脑上安装 dfu-util 软件：</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sudo apt-get install dfu-util
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li><p>分别用USB数据线连接主机电脑到USB恢复接口，以及console口</p></li><li><p>设置成usb启动 拨盘开关的2为on,其余三个是off</p></li><li><p>上电后，主机电脑运行：</p></li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>dfu-util -a 0 -D tf-a-ccmp25-dvk-optee-usb.stm32
dfu-util -a 0 -e
sleep 1
dfu-util -a 0 -D fip-ccmp25-dvk-ddr-optee-emmc.bin
dfu-util -a 0 -e
sleep 1
dfu-util -a 1 -D fip-ccmp25-dvk-optee-emmc.bin
dfu-util -a 0 -e
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后一个指令加载uboot到内存后，就可以重新烧对的固件。 一个好的办法是插上带卡刷固件的U盘或SD卡，插在开发板上，上面最后一个指令执行时，按任意键停在uboot，然后执行卡刷命令</p><h2 id="如何使用ccmp25开发板测试目标板卡的镜像或设备树片段" tabindex="-1"><a class="header-anchor" href="#如何使用ccmp25开发板测试目标板卡的镜像或设备树片段"><span>如何使用CCMP25开发板测试目标板卡的镜像或设备树片段</span></a></h2><p>有一点要记住，如果要使用Digi官方开发板来测试用户自定义板卡的固件，别用卡刷的方式把U-Boot也升级了。如果不慎刷了不对的uboot，先按上面办法恢复。 在自定义板卡的卡刷包中，删除tf-a和fip固件，然后用官方的fip和tf-a固件来替代原来自定义板卡的卡刷包，就可以用开发板运行目标板的卡刷包卡刷程序了</p>`,12),a=[c];function d(n,s){return t(),i("div",null,a)}const r=e(l,[["render",d],["__file","dvk_test_recovery.html.vue"]]),m=JSON.parse('{"path":"/zh/deyaio/wiki/ccmp25/dvk_test_recovery.html","title":"","lang":"zh-CN","frontmatter":{"description":"如何恢复CCMP25开发板的U-Boot 有时，我们误在CCMP25上误刷了用户板卡的Uboot，当用户板卡的U-Boot有和开发板不一样的电源或硬件定义时，原有的CCMP25开发板功能可能就不能用了，这时我们需要恢得开发板默认的UBoot。 如果我们用于更新固件的接口代码或引脚定义同开发板一样，我们仍可以用相关的接口进行升级固件。当所有可用的升级固件...","head":[["meta",{"property":"og:url","content":"https://peyoot.github.io/zh/deyaio/wiki/ccmp25/dvk_test_recovery.html"}],["meta",{"property":"og:description","content":"如何恢复CCMP25开发板的U-Boot 有时，我们误在CCMP25上误刷了用户板卡的Uboot，当用户板卡的U-Boot有和开发板不一样的电源或硬件定义时，原有的CCMP25开发板功能可能就不能用了，这时我们需要恢得开发板默认的UBoot。 如果我们用于更新固件的接口代码或引脚定义同开发板一样，我们仍可以用相关的接口进行升级固件。当所有可用的升级固件..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"如何恢复CCMP25开发板的U-Boot","slug":"如何恢复ccmp25开发板的u-boot","link":"#如何恢复ccmp25开发板的u-boot","children":[]},{"level":2,"title":"如何使用CCMP25开发板测试目标板卡的镜像或设备树片段","slug":"如何使用ccmp25开发板测试目标板卡的镜像或设备树片段","link":"#如何使用ccmp25开发板测试目标板卡的镜像或设备树片段","children":[]}],"git":{},"autoDesc":true,"filePathRelative":"zh/deyaio/wiki/ccmp25/dvk_test_recovery.md"}');export{r as comp,m as data};
