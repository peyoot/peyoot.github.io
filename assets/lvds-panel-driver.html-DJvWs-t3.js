import{_ as e,o as t,c as i,b as n}from"./app-oTA4_50g.js";const a={},l=n(`<h1 id="lvds-lcd液晶屏设备树驱动开发" tabindex="-1"><a class="header-anchor" href="#lvds-lcd液晶屏设备树驱动开发"><span>LVDS LCD液晶屏设备树驱动开发</span></a></h1><p>采用LVDS接口来传输图像数据的LCD液晶屏幕是工业上的主流液晶屏方案。LVDS屏幕接口一般分为单路6位LVDS、双路6位LVDS、单路8位LVDS和双路8位LVDS。6位说的是每个基色采用6位，一共是18位RGB数据。6位接口采用4对差分线来传输数据，3对数据差分线和一对时钟线。8位每个基色采用8bit，一共是24位RGB数据，8位接口接口采用5对差分线来传输数据，4对数据差分线和一对时钟线。</p><h2 id="基础知识点" tabindex="-1"><a class="header-anchor" href="#基础知识点"><span>基础知识点</span></a></h2><p>MPU内有一个lcdif或LTDC模块，MP25是LTDC。 LTDC是LCD-TFT Display Controller的缩写，这是STM32微控制器中专门用于驱动显示器的硬件模块。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>CPU → 内存(FrameBuffer) → LTDC硬件 → RGB信号 → 显示器
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>显示的数据流，以LVDS为例：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>应用程序 → 显示服务器 → Linux帧缓冲 → LTDC控制器 → LVDS转换器 → 液晶面板
    ↑              ↑           ↑           ↑           ↑           ↑
  软件层         系统层       驱动层      硬件层      接口转换    显示设备
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>STM32MP25有LTDC和LVDS两个模块，分别实现RGB信号和LVDS转换。</p><h2 id="时序定义" tabindex="-1"><a class="header-anchor" href="#时序定义"><span>时序定义</span></a></h2><p>+-------+----------+-------------------------------------+----------+ | | | ^ | | | | | |vsync_len | | | | | v | | +-------+----------+-------------------------------------+----------+ | | | ^ | | | | | |vback_porch | | | | | v | | +-------+----------#######################################----------+ | | # ^ # | | | # | # | | hsync | hback # | # hfront | | len | porch # | hactive # porch | |&lt;-----&gt;|&lt;--------&gt;#&lt;-------+---------------------------&gt;#&lt;--------&gt;| | | # | # | | | # |vactive # | | | # | # | | | # v # | +-------+----------#######################################----------+ | | | ^ | | | | | |vfront_porch | | | | | v | | +-------+----------+-------------------------------------+----------+</p><p>在DE模式下，同步信号仍然存在但宽度最小化，H一般可用10，V用3，这样</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>水平总周期 = hsync-len + hback-porch + hactive + hfront-porch
           = 10 + 160 + 1024 + 160 = 1354

垂直总周期 = vsync-len + vback-porch + vactive + vfront-porch
           = 3 + 23 + 600 + 12 = 638

刷新率 = 51200000 / (1354 * 638) ≈ 59.3Hz ✓

            clock-frequency = &lt;51200000&gt;; /* 像素时钟，单位Hz */
            hactive = &lt;1024&gt;; /* 水平有效像素 */
            vactive = &lt;600&gt;;  /* 垂直有效像素 */
            hfront-porch = &lt;160&gt;; /* 水平前廊 */
            hback-porch = &lt;140&gt;;  /* 水平后廊 */
            hsync-len = &lt;10&gt;;     /* 水平同步脉冲宽度 */
            vfront-porch = &lt;12&gt;;  /* 垂直前廊 */
            vback-porch = &lt;20&gt;;   /* 垂直后廊 */
            vsync-len = &lt;3&gt;;      /* 垂直同步脉冲宽度 */
            hsync-active = &lt;0&gt;;   /* 水平同步极性 */
            vsync-active = &lt;0&gt;;   /* 垂直同步极性 */
            de-active = &lt;1&gt;;      /* 数据使能信号极性 */
            pixelclk-active = &lt;0&gt;; /* 像素时钟极性 */

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="型号分析" tabindex="-1"><a class="header-anchor" href="#型号分析"><span>型号分析</span></a></h2><p>Part Number : EN10.1-1024600W-B004 （可能是二道贩子的型号） 标签：HC101IKA0050-A86 这个大概是正式型号， 查得：https://cn.sz-htc.com/products_details/53.html#c_static_001_P_18072-16805774017790</p><h2 id="是否要i2c控制" tabindex="-1"><a class="header-anchor" href="#是否要i2c控制"><span>是否要I2C控制</span></a></h2><p>由于spec中提到driver IC是HX8282&amp;HX8696，在LVDS屏幕中，这两颗芯片共同构成了屏驱动电路的核心： 1、HX8282是一颗接口转换与定时控制芯片，用于时序控制器 (Timing Controller, T-CON) 或源极驱动，它接收来自主板（通过LVDS接口或eDP接口）传来的图像数据和同步信号，将其转换为屏内部电路能处理的格式（通常是mini-LVDS或RSDS信号），并生成精确的时序，控制“什么时候将哪个像素的数据，送到屏幕的哪个位置”。 栅极驱动芯片 (Gate Driver)： 2、HX8696​是一颗行扫描驱动芯片，根据HX8282（T-CON）发出的指令，一行一行地、顺序地“打开”屏幕上相应行的薄膜晶体管开关。当某一行被“打开”时，该行所有像素的电极就与源极驱动器连接，准备充电到目标灰度电压。</p><p>HX8282通常需要I2C进行配置。但是，确实存在一些屏幕在硬件上已经通过电阻等将配置固定，或者芯片内部有默认配置，使得屏幕可以在不使用I2C的情况下工作。如果需要I2C控制，就会引入复杂性，因为默认内核不带有这些驱动，这需要添加内核不存在的选项和驱动。因此，优先考虑免配置的方式，这就要查LCD屏的spec。</p><h1 id="移除不必要的配置" tabindex="-1"><a class="header-anchor" href="#移除不必要的配置"><span>移除不必要的配置</span></a></h1><p>// 简化LTDC配置</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>&amp;ltdc {
    status = &quot;okay&quot;;
    // 移除rotation-memory，可能引起问题
    // rotation-memory = &lt;&amp;ltdc_sec_rotation&gt;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,20),s=[l];function d(c,r){return t(),i("div",null,s)}const o=e(a,[["render",d],["__file","lvds-panel-driver.html.vue"]]),p=JSON.parse('{"path":"/zh/note/digi/dey/lvds-panel-driver.html","title":"LVDS LCD液晶屏设备树驱动开发","lang":"zh-CN","frontmatter":{"description":"LVDS LCD液晶屏设备树驱动开发 采用LVDS接口来传输图像数据的LCD液晶屏幕是工业上的主流液晶屏方案。LVDS屏幕接口一般分为单路6位LVDS、双路6位LVDS、单路8位LVDS和双路8位LVDS。6位说的是每个基色采用6位，一共是18位RGB数据。6位接口采用4对差分线来传输数据，3对数据差分线和一对时钟线。8位每个基色采用8bit，一共是2...","head":[["meta",{"property":"og:url","content":"https://peyoot.github.io/zh/note/digi/dey/lvds-panel-driver.html"}],["meta",{"property":"og:title","content":"LVDS LCD液晶屏设备树驱动开发"}],["meta",{"property":"og:description","content":"LVDS LCD液晶屏设备树驱动开发 采用LVDS接口来传输图像数据的LCD液晶屏幕是工业上的主流液晶屏方案。LVDS屏幕接口一般分为单路6位LVDS、双路6位LVDS、单路8位LVDS和双路8位LVDS。6位说的是每个基色采用6位，一共是18位RGB数据。6位接口采用4对差分线来传输数据，3对数据差分线和一对时钟线。8位每个基色采用8bit，一共是2..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"LVDS LCD液晶屏设备树驱动开发\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"基础知识点","slug":"基础知识点","link":"#基础知识点","children":[]},{"level":2,"title":"时序定义","slug":"时序定义","link":"#时序定义","children":[]},{"level":2,"title":"型号分析","slug":"型号分析","link":"#型号分析","children":[]},{"level":2,"title":"是否要I2C控制","slug":"是否要i2c控制","link":"#是否要i2c控制","children":[]}],"git":{},"autoDesc":true,"filePathRelative":"zh/note/digi/dey/lvds-panel-driver.md"}');export{o as comp,p as data};
