import{_ as e,o as i,c as t,b as c}from"./app-oTA4_50g.js";const a={},n=c(`<h1 id="i2c接口调试指南" tabindex="-1"><a class="header-anchor" href="#i2c接口调试指南"><span>I2C接口调试指南</span></a></h1><p>I2C接口应用广泛，很多设备像触屏，电量检测，摄像头接口，传感器芯片等等都经常用到。在Connectcore的U-Boot里都集成有i2c的调试工具。</p><h2 id="调试命令集锦" tabindex="-1"><a class="header-anchor" href="#调试命令集锦"><span>调试命令集锦</span></a></h2><p>1、扫描总线 根据你有几条I2C总线，相关代号从0开始。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>i2cdetect -ry 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这样就会出来所有的I2C芯片的地址，比如OV的摄像头常见7位地址是36。提示：若 i2cdetect 显示 UU 而非 36，说明驱动已占用设备，需先 rmmod ov2740 再扫描。</p><p>2、读取16位寄存器0x300a（Chip ID） 在驱动ov2740.c内可以看到各寄存器的意义，OV2740的寄存器地址是16位，而i2cget默认使用8位寻址，所以一般用i2ctransfer读。 其中300a是chip ID寄存器，存放着设备名称，也就是2740。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code># 读取16位寄存器0x300a（Chip ID）
i2ctransfer -y 0 w2@0x36 0x30 0x0a r2
# w2	Write 2 bytes（写入2个字节），即发送 0x30 0x0a 到设备 0x36；r2	Read 2 bytes（读取2个字节）	从设备读取2个字节数据
# 预期输出：0x27 0x40，表示0x300a寄存器值为0x2740
# 读取Mode Select寄存器(0x0100)
i2ctransfer -y 0 w2@0x36 0x01 0x00 r1 
# 返回0x00或0x01
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="linux下设备树查询" tabindex="-1"><a class="header-anchor" href="#linux下设备树查询"><span>linux下设备树查询</span></a></h2><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>
i2croot@ccmp25-dvk:~# cat /proc/device-tree/soc\\@0/bus\\@42080000/i2c\\@40140000/name
root@ccmp25-dvk:~# cat /proc/device-tree/soc\\@0/bus\\@42080000/i2c\\@40120000/ov2740_mipi\\@36/status
root@ccmp25-dvk:~# cat /proc/device-tree/soc\\@0/bus\\@42080000/i2c\\@40120000/ov2740_mipi\\@36/clocks
root@ccmp25-dvk:~# cat /proc/device-tree/soc\\@0/bus\\@42080000/i2c\\@40120000/ov2740_mipi\\@36/compatible
root@ccmp25-dvk:~# cat /proc/device-tree/soc\\@0/bus\\@42080000/i2c\\@40120000/name
i2cr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),d=[n];function s(r,l){return i(),t("div",null,d)}const p=e(a,[["render",s],["__file","i2c.html.vue"]]),v=JSON.parse('{"path":"/zh/deyaio/wiki/ccmp25/i2c.html","title":"I2C接口调试指南","lang":"zh-CN","frontmatter":{"description":"I2C接口调试指南 I2C接口应用广泛，很多设备像触屏，电量检测，摄像头接口，传感器芯片等等都经常用到。在Connectcore的U-Boot里都集成有i2c的调试工具。 调试命令集锦 1、扫描总线 根据你有几条I2C总线，相关代号从0开始。 这样就会出来所有的I2C芯片的地址，比如OV的摄像头常见7位地址是36。提示：若 i2cdetect 显示 U...","head":[["meta",{"property":"og:url","content":"https://peyoot.github.io/zh/deyaio/wiki/ccmp25/i2c.html"}],["meta",{"property":"og:title","content":"I2C接口调试指南"}],["meta",{"property":"og:description","content":"I2C接口调试指南 I2C接口应用广泛，很多设备像触屏，电量检测，摄像头接口，传感器芯片等等都经常用到。在Connectcore的U-Boot里都集成有i2c的调试工具。 调试命令集锦 1、扫描总线 根据你有几条I2C总线，相关代号从0开始。 这样就会出来所有的I2C芯片的地址，比如OV的摄像头常见7位地址是36。提示：若 i2cdetect 显示 U..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"I2C接口调试指南\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"调试命令集锦","slug":"调试命令集锦","link":"#调试命令集锦","children":[]},{"level":2,"title":"linux下设备树查询","slug":"linux下设备树查询","link":"#linux下设备树查询","children":[]}],"git":{},"autoDesc":true,"filePathRelative":"zh/deyaio/wiki/ccmp25/i2c.md"}');export{p as comp,v as data};
