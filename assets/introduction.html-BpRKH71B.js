import{_ as e,o as n,c as r,b as i}from"./app-oTA4_50g.js";const t={},a=i(`<h1 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h1><p>这是一个用于服务器运维和备份的脚本工具，实现服务器健康报告、docker和docker-composite备份、冗余服务器同步。 如果您有使用 docker 的服务，并且需要定期报告服务器运行状况、备份和同步重要数据，以便在服务器硬件故障或故障的情况下可以随时切换备用平台，那么服务器维护者是正确的选择。</p><p>您可以在一台或多台服务器上运行项目的脚本。为了实现此脚本的最佳匹配，我们建议您按以下方式运行 docker 平台：</p><ol><li>以 docker-compose 的形式运行 portainer，路径为 ~/docker/portainer</li><li>使用 portainer 运行 docker-compose 相关的容器服务（即stack）</li><li>所有服务均由 Portainer 管理</li></ol><h2 id="用法" tabindex="-1"><a class="header-anchor" href="#用法"><span>用法</span></a></h2><p>您可以从脚本运行它，也可以将其安装为 systemd守护进程。若要将其作为工具手动运行，您需要在server-maintainer.sh的路径下拥有.env配置文件 运行“sudo ./server-maintainer.sh”</p><p>要将其安装为守护进程，只需以 root 身份运行 install.sh。您需要将配置放在 /etc/server-maintainer.conf 中。</p><p>如果您只需要一个手动工具，只需修改 env.sample 并将其重命名为 .env。对于 systemd 守护进程，请在安装后将修改后的 env.sample 复制到 /etc/server-maintainer/server-maintainer.conf。</p><p>您可以修改 server-maintainer.timer 以使守护进程按照您自己的计划运行。（默认情况下，它每天在 05：00：00 运行。）</p><h2 id="特性" tabindex="-1"><a class="header-anchor" href="#特性"><span>特性</span></a></h2><h3 id="服务器健康监测" tabindex="-1"><a class="header-anchor" href="#服务器健康监测"><span>服务器健康监测</span></a></h3><p>此项目脚本将检测服务器的健康状况：包括硬盘和内存、CPU 利用率和其他数据，并通过电子邮件发送报告。</p><h3 id="docker-服务的备份" tabindex="-1"><a class="header-anchor" href="#docker-服务的备份"><span>docker 服务的备份</span></a></h3><p>这个项目脚本的主要功能是备份指定的容器服务和数据，脚本会导出 Portainer 备份的一份副本，并将 Portainer 中的卷（Portainer 本身除外）同步到备份服务器。除了备份到数据服务器外，脚本还可以将所有portainer管理的卷同步到另一个热备用服务器，这样如果该服务器不可用，可以始终启用它作为替换。</p><h2 id="服务器上的目录树" tabindex="-1"><a class="header-anchor" href="#服务器上的目录树"><span>服务器上的目录树</span></a></h2><p>对于手动运行，您可以将此项目 git 克隆到您喜欢的任何路径。该脚本将具有本地备份路径BK_PATH，它将备份传输或同步到远程备份服务器的 remote-bk 文件夹。 以下是安装后相关文件夹/文件的示例。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>/usr/local/bin/server-maintainer.sh
/etc/server-maintainer/server-maintainer.conf
/var/local/server-maintainer
		   |__backups
		        |__monthly
~/docker
  |__ portainer
        |__ docker-compose.yml

~/remote-bk
    |__&lt;remote-hostname&gt;/server-maintainer/backups

/var/lib/docker/volumes

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),o=[a];function s(l,c){return n(),r("div",null,o)}const p=e(t,[["render",s],["__file","introduction.html.vue"]]),m=JSON.parse('{"path":"/zh/note/it/server-maintainer/introduction.html","title":"简介","lang":"zh-CN","frontmatter":{"description":"简介 这是一个用于服务器运维和备份的脚本工具，实现服务器健康报告、docker和docker-composite备份、冗余服务器同步。 如果您有使用 docker 的服务，并且需要定期报告服务器运行状况、备份和同步重要数据，以便在服务器硬件故障或故障的情况下可以随时切换备用平台，那么服务器维护者是正确的选择。 您可以在一台或多台服务器上运行项目的脚本。...","head":[["meta",{"property":"og:url","content":"https://peyoot.github.io/zh/note/it/server-maintainer/introduction.html"}],["meta",{"property":"og:title","content":"简介"}],["meta",{"property":"og:description","content":"简介 这是一个用于服务器运维和备份的脚本工具，实现服务器健康报告、docker和docker-composite备份、冗余服务器同步。 如果您有使用 docker 的服务，并且需要定期报告服务器运行状况、备份和同步重要数据，以便在服务器硬件故障或故障的情况下可以随时切换备用平台，那么服务器维护者是正确的选择。 您可以在一台或多台服务器上运行项目的脚本。..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"简介\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"用法","slug":"用法","link":"#用法","children":[]},{"level":2,"title":"特性","slug":"特性","link":"#特性","children":[{"level":3,"title":"服务器健康监测","slug":"服务器健康监测","link":"#服务器健康监测","children":[]},{"level":3,"title":"docker 服务的备份","slug":"docker-服务的备份","link":"#docker-服务的备份","children":[]}]},{"level":2,"title":"服务器上的目录树","slug":"服务器上的目录树","link":"#服务器上的目录树","children":[]}],"git":{},"autoDesc":true,"filePathRelative":"zh/note/it/server-maintainer/introduction.md"}');export{p as comp,m as data};
